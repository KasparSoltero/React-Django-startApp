{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport React from \"react\";\n\nvar Spectrogram = function (_a) {\n  var data = _a.data,\n      layout = _a.layout,\n      options = _a.options;\n  var lineCanvasRef = React.useRef(null);\n  var heatmapCanvasRef = React.useRef(null);\n  var minYScaleValue = options.yAxis.values[0];\n  var maxYScaleValue = options.yAxis.values[options.yAxis.values.length - 1];\n  var containerStyle = {\n    paddingTop: layout === null || layout === void 0 ? void 0 : layout.paddingTop,\n    paddingRight: layout === null || layout === void 0 ? void 0 : layout.paddingRight,\n    paddingBottom: layout === null || layout === void 0 ? void 0 : layout.paddingBottom,\n    paddingLeft: layout === null || layout === void 0 ? void 0 : layout.paddingLeft\n  };\n  var lineContainerStyle = {\n    position: \"relative\"\n  };\n  var heatmapContainerStyle = {\n    position: \"relative\",\n    marginTop: layout.heatmap.marginTop\n  };\n  var heatmapCanvasStyle = {};\n  var canvasStyle = {\n    display: \"block\"\n  };\n  var scaleContainerStyle = {}; // util function\n\n  var fillStyle = React.useMemo(function () {\n    switch (options === null || options === void 0 ? void 0 : options.theme) {\n      case \"black-white\":\n        return function (x) {\n          return \"rgb(\" + x + \",\" + x + \",\" + x + \")\";\n        };\n\n      case \"white-black\":\n        return function (x) {\n          x = 255 - x;\n          return \"rgb(\" + x + \",\" + x + \",\" + x + \")\";\n        };\n\n      case \"black-red\":\n        return function (x) {\n          return \"rgb(\" + x + \",0,0)\";\n        };\n\n      case \"black-green\":\n        return function (x) {\n          return \"rgb(0,\" + x + \",0)\";\n        };\n\n      case \"black-blue\":\n        return function (x) {\n          return \"rgb(0,0,\" + x + \")\";\n        };\n\n      case \"white-red\":\n        return function (x) {\n          x = 255 - x;\n          return \"rgb(255,\" + x + \",\" + x + \")\";\n        };\n\n      case \"white-green\":\n        return function (x) {\n          x = 255 - x;\n          return \"rgb(\" + x + \",255,\" + x + \")\";\n        };\n\n      case \"white-blue\":\n      default:\n        return function (x) {\n          x = 255 - x;\n          return \"rgb(\" + x + \",\" + x + \",255)\";\n        };\n    }\n  }, [options === null || options === void 0 ? void 0 : options.theme]); // util function\n\n  var baseStyle = React.useMemo(function () {\n    switch (options === null || options === void 0 ? void 0 : options.theme) {\n      case \"black-white\":\n        return function () {\n          return 255;\n        };\n\n      case \"white-black\":\n        return function () {\n          return 255;\n        };\n\n      case \"black-red\":\n        return function () {\n          return 255;\n        };\n\n      case \"black-green\":\n        return function () {\n          return 255;\n        };\n\n      case \"black-blue\":\n        return function () {\n          return 255;\n        };\n\n      case \"white-red\":\n        return function () {\n          return 255;\n        };\n\n      case \"white-green\":\n        return function () {\n          return 255;\n        };\n\n      case \"white-blue\":\n      default:\n        return function () {\n          return 255;\n        };\n    }\n  }, [options === null || options === void 0 ? void 0 : options.theme]); // When new data arrive update charts\n\n  React.useEffect(function () {\n    var drawLine = function (data) {\n      var canvas = lineCanvasRef.current;\n      if (canvas === null) return false;\n      var ctx = canvas.getContext(\"2d\");\n      if (ctx === null) return false;\n      var dx = canvas.width / data.length;\n      var dk = canvas.height / maxYScaleValue;\n      var x = dx / 2; // Clear canvas\n\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.strokeStyle = fillStyle(baseStyle());\n      ctx.lineWidth = 1;\n      ctx.lineCap = \"round\";\n      ctx.lineJoin = \"round\";\n      ctx.beginPath();\n      ctx.moveTo(x, (maxYScaleValue - data[0]) * dk);\n\n      for (var _i = 0, _a = data.slice(1); _i < _a.length; _i++) {\n        var value = _a[_i];\n        x += dx;\n        ctx.lineTo(x, (maxYScaleValue - value) * dk);\n      }\n\n      ctx.stroke();\n      return true;\n    };\n\n    var drawHeatmap = function (data) {\n      var canvas = heatmapCanvasRef.current;\n      if (canvas === null) return false;\n      var ctx = canvas.getContext(\"2d\");\n      if (ctx === null) return false; // dx can be floating point, then it glitches\n      // https://stackoverflow.com/questions/58136632/fillrect-not-overlapping-exactly-when-float-numbers-are-used\n      // https://html5rocks.com/en/tutorials/canvas/performance/#toc-avoid-float\n\n      var dx = canvas.width / data.length;\n      var dy = layout.heatmap.height / options.zAxis.displayBins;\n      var x = 0;\n      /**\r\n       * The shift operation was carefully chosen to maximize performance.\r\n       * It is implemented by drawImage - canvas is drawn onto itself with\r\n       * an offset.\r\n       * This effectively deletes anything that is shifted beyond canvas\r\n       * in a single operation. Experimental evaluation revealed this\r\n       * method to be much faster than using putImageData method.\r\n       */\n\n      ctx.drawImage(canvas, 0, dy);\n\n      for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n        var value = data_1[_i];\n        ctx.fillStyle = fillStyle(value / maxYScaleValue * baseStyle());\n        ctx.fillRect(x, 0, dx, dy);\n        x += dx;\n      }\n\n      return true;\n    };\n\n    if (data.y.length !== 0) {\n      drawLine(data.y);\n      drawHeatmap(data.y);\n    } // Deliberatly missing dependencies: 'layout.heatmap.height', 'maxYScaleValue', and 'options.zAxis.displayBins'.\n    // eslint-disable-next-line\n\n  }, [data, fillStyle, baseStyle]);\n  var yScale = React.useMemo(function () {\n    var Xoffset = 5;\n    var Yoffset = 16;\n    var scaleStyle = {\n      marginTop: layout.scale.marginTop,\n      borderWidth: 1,\n      borderStyle: \"solid\",\n      borderColor: \"black\"\n    };\n    return React.createElement(\"svg\", {\n      width: layout.width,\n      height: layout.scale.height,\n      overflow: \"visible\",\n      style: scaleStyle\n    }, React.createElement(\"defs\", null, React.createElement(\"linearGradient\", {\n      id: \"linearGradient\"\n    }, React.createElement(\"stop\", {\n      offset: \"0%\",\n      \"stop-color\": fillStyle(0)\n    }), React.createElement(\"stop\", {\n      offset: \"100%\",\n      \"stop-color\": fillStyle(baseStyle())\n    }))), React.createElement(\"rect\", {\n      fill: \"url('#linearGradient')\",\n      width: layout.width,\n      height: layout.scale.height\n    }), React.createElement(\"text\", {\n      x: Xoffset,\n      y: layout.scale.height + Yoffset,\n      fill: \"black\",\n      stroke: \"black\",\n      textAnchor: \"start\"\n    }, minYScaleValue), React.createElement(\"text\", {\n      x: layout.width - Xoffset,\n      y: layout.scale.height + Yoffset,\n      fill: \"black\",\n      stroke: \"black\",\n      textAnchor: \"end\"\n    }, maxYScaleValue));\n  }, [layout, fillStyle, baseStyle, minYScaleValue, maxYScaleValue]);\n  return React.createElement(\"div\", {\n    style: containerStyle\n  }, React.createElement(\"div\", {\n    style: lineContainerStyle\n  }, React.createElement(YAxis, __assign({}, options.yAxis, {\n    width: layout.width,\n    height: layout.line.height\n  })), React.createElement(\"canvas\", {\n    id: \"lineChart\",\n    ref: lineCanvasRef,\n    width: layout.width,\n    height: layout.line.height,\n    style: __assign({}, canvasStyle)\n  }), React.createElement(XAxis, __assign({}, options.xAxis, {\n    width: layout.width,\n    height: layout.line.height,\n    x: data.x\n  }))), React.createElement(\"div\", {\n    style: heatmapContainerStyle\n  }, React.createElement(ZAxis, __assign({}, options.zAxis, {\n    z: data.z,\n    width: layout.width,\n    height: layout.heatmap.height\n  })), React.createElement(\"canvas\", {\n    id: \"heatmapChart\",\n    ref: heatmapCanvasRef,\n    width: layout.width,\n    height: layout.heatmap.height,\n    style: __assign(__assign({}, canvasStyle), heatmapCanvasStyle)\n  }, \"Your browser does not support <canvas> tag element!\"), React.createElement(XAxis, __assign({}, options.xAxis, {\n    width: layout.width,\n    height: layout.heatmap.height,\n    x: data.x,\n    displayGrid: false\n  }))), React.createElement(\"div\", {\n    style: scaleContainerStyle\n  }, yScale));\n};\n\nvar XAxis = React.memo(function (_a) {\n  var width = _a.width,\n      height = _a.height,\n      values = _a.values,\n      x = _a.x,\n      _b = _a.displayAxis,\n      displayAxis = _b === void 0 ? true : _b,\n      _c = _a.displayGrid,\n      displayGrid = _c === void 0 ? true : _c,\n      _d = _a.color,\n      color = _d === void 0 ? \"black\" : _d;\n  if (!displayAxis && !displayGrid) return React.createElement(React.Fragment, null);\n  var strokeWidth = 0.25;\n  var t = 5; // tick size\n\n  var dx = width / x.length;\n  var pos = [];\n  x.forEach(function (v, i) {\n    if (values.includes(v)) {\n      pos.push(i * dx + dx / 2);\n    }\n  });\n  var gridLines = [];\n  var axisLabels = [];\n  var axisLines = [];\n  pos.forEach(function (v, i) {\n    if (displayGrid) {\n      gridLines.push(React.createElement(\"path\", {\n        key: v,\n        d: \"M \" + v + \",\" + 0 + \" L \" + v + \",\" + -height\n      }));\n    }\n\n    if (displayAxis) {\n      axisLabels.push(React.createElement(\"text\", {\n        key: v,\n        x: v,\n        y: t + 15,\n        textAnchor: \"middle\"\n      }, values[i].toString()));\n      axisLines.push(React.createElement(\"path\", {\n        key: v,\n        d: \"M \" + v + \",0 L \" + v + \",\" + t\n      }));\n    }\n  });\n  return React.createElement(\"svg\", {\n    id: \"xAxis\",\n    width: width,\n    height: 10,\n    style: {\n      position: \"absolute\",\n      left: 0,\n      top: height\n    },\n    overflow: \"visible\"\n  }, React.createElement(\"g\", {\n    fill: color,\n    stroke: color,\n    strokeWidth: strokeWidth\n  }, gridLines), React.createElement(\"g\", {\n    fill: color,\n    stroke: color,\n    strokeWidth: 4 * strokeWidth\n  }, axisLines), React.createElement(\"g\", {\n    fill: color,\n    stroke: color\n  }, axisLabels));\n});\nvar YAxis = React.memo(function (_a) {\n  var width = _a.width,\n      height = _a.height,\n      values = _a.values,\n      _b = _a.displayAxis,\n      displayAxis = _b === void 0 ? true : _b,\n      _c = _a.displayGrid,\n      displayGrid = _c === void 0 ? true : _c,\n      _d = _a.color,\n      color = _d === void 0 ? \"black\" : _d;\n  if (!displayAxis && !displayGrid) return React.createElement(React.Fragment, null);\n  var strokeWidth = 0.25;\n  var w = 30; // svg width\n\n  var t = 5; // tick width\n\n  var m = values[values.length - 1];\n  var pos = values.map(function (v) {\n    return Math.floor(height - v * height / m);\n  }); // create paths and texts\n\n  var gridLines = [];\n  var axisLines = [];\n  var axisLabels = [];\n  pos.forEach(function (v, i) {\n    if (displayGrid) {\n      gridLines.push(React.createElement(\"path\", {\n        key: v,\n        d: \"M \" + w + \",\" + v + \" L \" + (width + w) + \",\" + v\n      }));\n    }\n\n    if (displayAxis) {\n      axisLabels.push(React.createElement(\"text\", {\n        key: v,\n        \"text-anchor\": \"end\",\n        x: w - 2 * t,\n        y: v + 5\n      }, values[i]));\n      axisLines.push(React.createElement(\"path\", {\n        key: v,\n        d: \"M \" + (w - t) + \",\" + v + \" L \" + w + \",\" + v\n      }));\n    }\n  }); // width and height of yAxis is irrelevant because it is positioned abolutely\n\n  return React.createElement(\"svg\", {\n    id: \"yAxis\",\n    overflow: \"visible\",\n    style: {\n      position: \"absolute\",\n      left: -w\n    }\n  }, React.createElement(\"g\", {\n    fill: color,\n    stroke: color,\n    strokeWidth: strokeWidth\n  }, gridLines), React.createElement(\"g\", {\n    fill: color,\n    stroke: color,\n    strokeWidth: 4 * strokeWidth\n  }, axisLines), React.createElement(\"g\", {\n    fill: color,\n    stroke: color\n  }, axisLabels));\n});\n\nvar ZAxis = function (_a) {\n  var width = _a.width,\n      height = _a.height,\n      z = _a.z,\n      displayBins = _a.displayBins,\n      _b = _a.displayAxis,\n      displayAxis = _b === void 0 ? true : _b,\n      _c = _a.color,\n      color = _c === void 0 ? \"black\" : _c;\n  var axisLabelsRef = React.useRef([]);\n\n  var _d = React.useState([]),\n      axisLabels = _d[0],\n      setAxisLabels = _d[1];\n\n  var strokeWidth = 0.25;\n  var w = 30; // svg width\n\n  var t = 5; // tick width\n\n  var pos = React.useMemo(function () {\n    var dz = height / displayBins;\n    return Array.from(Array(displayBins), function (v, i) {\n      return i * dz + dz / 2;\n    });\n  }, [height, displayBins]);\n  var axisLines = React.useMemo(function () {\n    var axisLines = [];\n    pos.forEach(function (v, i) {\n      axisLines.push(React.createElement(\"path\", {\n        key: v,\n        d: \"M \" + (w - t) + \",\" + v + \" L \" + w + \",\" + v\n      }));\n    });\n    return axisLines;\n  }, [pos, w, t]); // on new z value recreate all <text> labels\n\n  React.useEffect(function () {\n    if (axisLabelsRef.current.length < displayBins) {\n      axisLabelsRef.current.unshift(z);\n    } else {\n      axisLabelsRef.current.pop();\n      axisLabelsRef.current.unshift(z);\n    }\n\n    var labels = [];\n    axisLabelsRef.current.forEach(function (l, i) {\n      switch (typeof l) {\n        case \"object\":\n          labels.push(React.createElement(\"text\", {\n            key: i + \"-\" + l.toLocaleTimeString(),\n            \"text-anchor\": \"end\",\n            x: w - 2 * t,\n            y: pos[i] + 5\n          }, l.toLocaleTimeString()));\n          break;\n\n        case \"string\":\n          labels.push(React.createElement(\"text\", {\n            key: i + \"-\" + l,\n            \"text-anchor\": \"end\",\n            x: w - 2 * t,\n            y: pos[i] + 5\n          }, l));\n          break;\n\n        case \"number\":\n          labels.push(React.createElement(\"text\", {\n            key: i + \"-\" + l.toLocaleString(),\n            \"text-anchor\": \"end\",\n            x: w - 2 * t,\n            y: pos[i] + 5\n          }, l.toLocaleString()));\n          break;\n\n        default:\n          break;\n      }\n    });\n    setAxisLabels(labels); // Deliberatly missing dependencies: 'displayBins' and 'pos'.\n    // eslint-disable-next-line\n  }, [z]);\n  if (!displayAxis) return React.createElement(React.Fragment, null); // width and height of zAxis is irrelevant because it is positioned abolutely\n\n  return React.createElement(\"svg\", {\n    id: \"zAxis\",\n    overflow: \"visible\",\n    style: {\n      position: \"absolute\",\n      left: -w\n    }\n  }, React.createElement(\"g\", {\n    fill: color,\n    stroke: color,\n    \"stroke-width\": 4 * strokeWidth\n  }, axisLines), React.createElement(\"g\", {\n    fill: color,\n    stroke: color\n  }, axisLabels));\n};\n\nexport default Spectrogram;","map":{"version":3,"sources":["/Users/kaspar/Documents/GitHub/React-Django-startApp/app/node_modules/react-spectrogram/build/Spectrogram.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","Spectrogram","_a","data","layout","options","lineCanvasRef","useRef","heatmapCanvasRef","minYScaleValue","yAxis","values","maxYScaleValue","containerStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","lineContainerStyle","position","heatmapContainerStyle","marginTop","heatmap","heatmapCanvasStyle","canvasStyle","display","scaleContainerStyle","fillStyle","useMemo","theme","x","baseStyle","useEffect","drawLine","canvas","current","ctx","getContext","dx","width","dk","height","clearRect","strokeStyle","lineWidth","lineCap","lineJoin","beginPath","moveTo","_i","slice","value","lineTo","stroke","drawHeatmap","dy","zAxis","displayBins","drawImage","data_1","fillRect","y","yScale","Xoffset","Yoffset","scaleStyle","scale","borderWidth","borderStyle","borderColor","createElement","overflow","style","id","offset","fill","textAnchor","YAxis","line","ref","XAxis","xAxis","ZAxis","z","displayGrid","memo","_b","displayAxis","_c","_d","color","Fragment","strokeWidth","pos","forEach","v","includes","push","gridLines","axisLabels","axisLines","key","d","toString","left","top","w","m","map","Math","floor","axisLabelsRef","useState","setAxisLabels","dz","Array","from","unshift","pop","labels","l","toLocaleTimeString","toLocaleString"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React from \"react\";\r\nvar Spectrogram = function (_a) {\r\n    var data = _a.data, layout = _a.layout, options = _a.options;\r\n    var lineCanvasRef = React.useRef(null);\r\n    var heatmapCanvasRef = React.useRef(null);\r\n    var minYScaleValue = options.yAxis.values[0];\r\n    var maxYScaleValue = options.yAxis.values[options.yAxis.values.length - 1];\r\n    var containerStyle = {\r\n        paddingTop: layout === null || layout === void 0 ? void 0 : layout.paddingTop,\r\n        paddingRight: layout === null || layout === void 0 ? void 0 : layout.paddingRight,\r\n        paddingBottom: layout === null || layout === void 0 ? void 0 : layout.paddingBottom,\r\n        paddingLeft: layout === null || layout === void 0 ? void 0 : layout.paddingLeft\r\n    };\r\n    var lineContainerStyle = {\r\n        position: \"relative\"\r\n    };\r\n    var heatmapContainerStyle = {\r\n        position: \"relative\",\r\n        marginTop: layout.heatmap.marginTop\r\n    };\r\n    var heatmapCanvasStyle = {};\r\n    var canvasStyle = {\r\n        display: \"block\"\r\n    };\r\n    var scaleContainerStyle = {};\r\n    // util function\r\n    var fillStyle = React.useMemo(function () {\r\n        switch (options === null || options === void 0 ? void 0 : options.theme) {\r\n            case \"black-white\":\r\n                return function (x) {\r\n                    return \"rgb(\" + x + \",\" + x + \",\" + x + \")\";\r\n                };\r\n            case \"white-black\":\r\n                return function (x) {\r\n                    x = 255 - x;\r\n                    return \"rgb(\" + x + \",\" + x + \",\" + x + \")\";\r\n                };\r\n            case \"black-red\":\r\n                return function (x) {\r\n                    return \"rgb(\" + x + \",0,0)\";\r\n                };\r\n            case \"black-green\":\r\n                return function (x) {\r\n                    return \"rgb(0,\" + x + \",0)\";\r\n                };\r\n            case \"black-blue\":\r\n                return function (x) {\r\n                    return \"rgb(0,0,\" + x + \")\";\r\n                };\r\n            case \"white-red\":\r\n                return function (x) {\r\n                    x = 255 - x;\r\n                    return \"rgb(255,\" + x + \",\" + x + \")\";\r\n                };\r\n            case \"white-green\":\r\n                return function (x) {\r\n                    x = 255 - x;\r\n                    return \"rgb(\" + x + \",255,\" + x + \")\";\r\n                };\r\n            case \"white-blue\":\r\n            default:\r\n                return function (x) {\r\n                    x = 255 - x;\r\n                    return \"rgb(\" + x + \",\" + x + \",255)\";\r\n                };\r\n        }\r\n    }, [options === null || options === void 0 ? void 0 : options.theme]);\r\n    // util function\r\n    var baseStyle = React.useMemo(function () {\r\n        switch (options === null || options === void 0 ? void 0 : options.theme) {\r\n            case \"black-white\":\r\n                return function () { return 255; };\r\n            case \"white-black\":\r\n                return function () { return 255; };\r\n            case \"black-red\":\r\n                return function () { return 255; };\r\n            case \"black-green\":\r\n                return function () { return 255; };\r\n            case \"black-blue\":\r\n                return function () { return 255; };\r\n            case \"white-red\":\r\n                return function () { return 255; };\r\n            case \"white-green\":\r\n                return function () { return 255; };\r\n            case \"white-blue\":\r\n            default:\r\n                return function () { return 255; };\r\n        }\r\n    }, [options === null || options === void 0 ? void 0 : options.theme]);\r\n    // When new data arrive update charts\r\n    React.useEffect(function () {\r\n        var drawLine = function (data) {\r\n            var canvas = lineCanvasRef.current;\r\n            if (canvas === null)\r\n                return false;\r\n            var ctx = canvas.getContext(\"2d\");\r\n            if (ctx === null)\r\n                return false;\r\n            var dx = canvas.width / data.length;\r\n            var dk = canvas.height / maxYScaleValue;\r\n            var x = dx / 2;\r\n            // Clear canvas\r\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n            ctx.strokeStyle = fillStyle(baseStyle());\r\n            ctx.lineWidth = 1;\r\n            ctx.lineCap = \"round\";\r\n            ctx.lineJoin = \"round\";\r\n            ctx.beginPath();\r\n            ctx.moveTo(x, (maxYScaleValue - data[0]) * dk);\r\n            for (var _i = 0, _a = data.slice(1); _i < _a.length; _i++) {\r\n                var value = _a[_i];\r\n                x += dx;\r\n                ctx.lineTo(x, (maxYScaleValue - value) * dk);\r\n            }\r\n            ctx.stroke();\r\n            return true;\r\n        };\r\n        var drawHeatmap = function (data) {\r\n            var canvas = heatmapCanvasRef.current;\r\n            if (canvas === null)\r\n                return false;\r\n            var ctx = canvas.getContext(\"2d\");\r\n            if (ctx === null)\r\n                return false;\r\n            // dx can be floating point, then it glitches\r\n            // https://stackoverflow.com/questions/58136632/fillrect-not-overlapping-exactly-when-float-numbers-are-used\r\n            // https://html5rocks.com/en/tutorials/canvas/performance/#toc-avoid-float\r\n            var dx = canvas.width / data.length;\r\n            var dy = layout.heatmap.height / options.zAxis.displayBins;\r\n            var x = 0;\r\n            /**\r\n             * The shift operation was carefully chosen to maximize performance.\r\n             * It is implemented by drawImage - canvas is drawn onto itself with\r\n             * an offset.\r\n             * This effectively deletes anything that is shifted beyond canvas\r\n             * in a single operation. Experimental evaluation revealed this\r\n             * method to be much faster than using putImageData method.\r\n             */\r\n            ctx.drawImage(canvas, 0, dy);\r\n            for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\r\n                var value = data_1[_i];\r\n                ctx.fillStyle = fillStyle(value / maxYScaleValue * baseStyle());\r\n                ctx.fillRect(x, 0, dx, dy);\r\n                x += dx;\r\n            }\r\n            return true;\r\n        };\r\n        if (data.y.length !== 0) {\r\n            drawLine(data.y);\r\n            drawHeatmap(data.y);\r\n        }\r\n        // Deliberatly missing dependencies: 'layout.heatmap.height', 'maxYScaleValue', and 'options.zAxis.displayBins'.\r\n        // eslint-disable-next-line\r\n    }, [data, fillStyle, baseStyle]);\r\n    var yScale = React.useMemo(function () {\r\n        var Xoffset = 5;\r\n        var Yoffset = 16;\r\n        var scaleStyle = {\r\n            marginTop: layout.scale.marginTop,\r\n            borderWidth: 1,\r\n            borderStyle: \"solid\",\r\n            borderColor: \"black\"\r\n        };\r\n        return (React.createElement(\"svg\", { width: layout.width, height: layout.scale.height, overflow: \"visible\", style: scaleStyle },\r\n            React.createElement(\"defs\", null,\r\n                React.createElement(\"linearGradient\", { id: \"linearGradient\" },\r\n                    React.createElement(\"stop\", { offset: \"0%\", \"stop-color\": fillStyle(0) }),\r\n                    React.createElement(\"stop\", { offset: \"100%\", \"stop-color\": fillStyle(baseStyle()) }))),\r\n            React.createElement(\"rect\", { fill: \"url('#linearGradient')\", width: layout.width, height: layout.scale.height }),\r\n            React.createElement(\"text\", { x: Xoffset, y: layout.scale.height + Yoffset, fill: \"black\", stroke: \"black\", textAnchor: \"start\" }, minYScaleValue),\r\n            React.createElement(\"text\", { x: layout.width - Xoffset, y: layout.scale.height + Yoffset, fill: \"black\", stroke: \"black\", textAnchor: \"end\" }, maxYScaleValue)));\r\n    }, [layout, fillStyle, baseStyle, minYScaleValue, maxYScaleValue]);\r\n    return (React.createElement(\"div\", { style: containerStyle },\r\n        React.createElement(\"div\", { style: lineContainerStyle },\r\n            React.createElement(YAxis, __assign({}, options.yAxis, { width: layout.width, height: layout.line.height })),\r\n            React.createElement(\"canvas\", { id: \"lineChart\", ref: lineCanvasRef, width: layout.width, height: layout.line.height, style: __assign({}, canvasStyle) }),\r\n            React.createElement(XAxis, __assign({}, options.xAxis, { width: layout.width, height: layout.line.height, x: data.x }))),\r\n        React.createElement(\"div\", { style: heatmapContainerStyle },\r\n            React.createElement(ZAxis, __assign({}, options.zAxis, { z: data.z, width: layout.width, height: layout.heatmap.height })),\r\n            React.createElement(\"canvas\", { id: \"heatmapChart\", ref: heatmapCanvasRef, width: layout.width, height: layout.heatmap.height, style: __assign(__assign({}, canvasStyle), heatmapCanvasStyle) }, \"Your browser does not support <canvas> tag element!\"),\r\n            React.createElement(XAxis, __assign({}, options.xAxis, { width: layout.width, height: layout.heatmap.height, x: data.x, displayGrid: false }))),\r\n        React.createElement(\"div\", { style: scaleContainerStyle }, yScale)));\r\n};\r\nvar XAxis = React.memo(function (_a) {\r\n    var width = _a.width, height = _a.height, values = _a.values, x = _a.x, _b = _a.displayAxis, displayAxis = _b === void 0 ? true : _b, _c = _a.displayGrid, displayGrid = _c === void 0 ? true : _c, _d = _a.color, color = _d === void 0 ? \"black\" : _d;\r\n    if (!displayAxis && !displayGrid)\r\n        return (React.createElement(React.Fragment, null));\r\n    var strokeWidth = 0.25;\r\n    var t = 5; // tick size\r\n    var dx = width / x.length;\r\n    var pos = [];\r\n    x.forEach(function (v, i) {\r\n        if (values.includes(v)) {\r\n            pos.push(i * dx + dx / 2);\r\n        }\r\n    });\r\n    var gridLines = [];\r\n    var axisLabels = [];\r\n    var axisLines = [];\r\n    pos.forEach(function (v, i) {\r\n        if (displayGrid) {\r\n            gridLines.push(React.createElement(\"path\", { key: v, d: \"M \" + v + \",\" + 0 + \" L \" + v + \",\" + -height }));\r\n        }\r\n        if (displayAxis) {\r\n            axisLabels.push(React.createElement(\"text\", { key: v, x: v, y: t + 15, textAnchor: \"middle\" }, values[i].toString()));\r\n            axisLines.push(React.createElement(\"path\", { key: v, d: \"M \" + v + \",0 L \" + v + \",\" + t }));\r\n        }\r\n    });\r\n    return (React.createElement(\"svg\", { id: \"xAxis\", width: width, height: 10, style: { position: \"absolute\", left: 0, top: height }, overflow: \"visible\" },\r\n        React.createElement(\"g\", { fill: color, stroke: color, strokeWidth: strokeWidth }, gridLines),\r\n        React.createElement(\"g\", { fill: color, stroke: color, strokeWidth: 4 * strokeWidth }, axisLines),\r\n        React.createElement(\"g\", { fill: color, stroke: color }, axisLabels)));\r\n});\r\nvar YAxis = React.memo(function (_a) {\r\n    var width = _a.width, height = _a.height, values = _a.values, _b = _a.displayAxis, displayAxis = _b === void 0 ? true : _b, _c = _a.displayGrid, displayGrid = _c === void 0 ? true : _c, _d = _a.color, color = _d === void 0 ? \"black\" : _d;\r\n    if (!displayAxis && !displayGrid)\r\n        return (React.createElement(React.Fragment, null));\r\n    var strokeWidth = 0.25;\r\n    var w = 30; // svg width\r\n    var t = 5; // tick width\r\n    var m = values[values.length - 1];\r\n    var pos = values.map(function (v) {\r\n        return Math.floor(height - v * height / m);\r\n    });\r\n    // create paths and texts\r\n    var gridLines = [];\r\n    var axisLines = [];\r\n    var axisLabels = [];\r\n    pos.forEach(function (v, i) {\r\n        if (displayGrid) {\r\n            gridLines.push(React.createElement(\"path\", { key: v, d: \"M \" + w + \",\" + v + \" L \" + (width + w) + \",\" + v }));\r\n        }\r\n        if (displayAxis) {\r\n            axisLabels.push(React.createElement(\"text\", { key: v, \"text-anchor\": \"end\", x: w - 2 * t, y: v + 5 }, values[i]));\r\n            axisLines.push(React.createElement(\"path\", { key: v, d: \"M \" + (w - t) + \",\" + v + \" L \" + w + \",\" + v }));\r\n        }\r\n    });\r\n    // width and height of yAxis is irrelevant because it is positioned abolutely\r\n    return (React.createElement(\"svg\", { id: \"yAxis\", overflow: \"visible\", style: { position: \"absolute\", left: -w } },\r\n        React.createElement(\"g\", { fill: color, stroke: color, strokeWidth: strokeWidth }, gridLines),\r\n        React.createElement(\"g\", { fill: color, stroke: color, strokeWidth: 4 * strokeWidth }, axisLines),\r\n        React.createElement(\"g\", { fill: color, stroke: color }, axisLabels)));\r\n});\r\nvar ZAxis = function (_a) {\r\n    var width = _a.width, height = _a.height, z = _a.z, displayBins = _a.displayBins, _b = _a.displayAxis, displayAxis = _b === void 0 ? true : _b, _c = _a.color, color = _c === void 0 ? \"black\" : _c;\r\n    var axisLabelsRef = React.useRef([]);\r\n    var _d = React.useState([]), axisLabels = _d[0], setAxisLabels = _d[1];\r\n    var strokeWidth = 0.25;\r\n    var w = 30; // svg width\r\n    var t = 5; // tick width\r\n    var pos = React.useMemo(function () {\r\n        var dz = height / displayBins;\r\n        return Array.from(Array(displayBins), function (v, i) {\r\n            return i * dz + dz / 2;\r\n        });\r\n    }, [height, displayBins]);\r\n    var axisLines = React.useMemo(function () {\r\n        var axisLines = [];\r\n        pos.forEach(function (v, i) {\r\n            axisLines.push(React.createElement(\"path\", { key: v, d: \"M \" + (w - t) + \",\" + v + \" L \" + w + \",\" + v }));\r\n        });\r\n        return axisLines;\r\n    }, [pos, w, t]);\r\n    // on new z value recreate all <text> labels\r\n    React.useEffect(function () {\r\n        if (axisLabelsRef.current.length < displayBins) {\r\n            axisLabelsRef.current.unshift(z);\r\n        }\r\n        else {\r\n            axisLabelsRef.current.pop();\r\n            axisLabelsRef.current.unshift(z);\r\n        }\r\n        var labels = [];\r\n        axisLabelsRef.current.forEach(function (l, i) {\r\n            switch (typeof l) {\r\n                case \"object\":\r\n                    labels.push(React.createElement(\"text\", { key: i + \"-\" + l.toLocaleTimeString(), \"text-anchor\": \"end\", x: w - 2 * t, y: pos[i] + 5 }, l.toLocaleTimeString()));\r\n                    break;\r\n                case \"string\":\r\n                    labels.push(React.createElement(\"text\", { key: i + \"-\" + l, \"text-anchor\": \"end\", x: w - 2 * t, y: pos[i] + 5 }, l));\r\n                    break;\r\n                case \"number\":\r\n                    labels.push(React.createElement(\"text\", { key: i + \"-\" + l.toLocaleString(), \"text-anchor\": \"end\", x: w - 2 * t, y: pos[i] + 5 }, l.toLocaleString()));\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n        setAxisLabels(labels);\r\n        // Deliberatly missing dependencies: 'displayBins' and 'pos'.\r\n        // eslint-disable-next-line\r\n    }, [z]);\r\n    if (!displayAxis)\r\n        return (React.createElement(React.Fragment, null));\r\n    // width and height of zAxis is irrelevant because it is positioned abolutely\r\n    return (React.createElement(\"svg\", { id: \"zAxis\", overflow: \"visible\", style: { position: \"absolute\", left: -w } },\r\n        React.createElement(\"g\", { fill: color, stroke: color, \"stroke-width\": 4 * strokeWidth }, axisLines),\r\n        React.createElement(\"g\", { fill: color, stroke: color }, axisLabels)));\r\n};\r\nexport default Spectrogram;\r\n"]},"metadata":{},"sourceType":"module"}